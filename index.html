<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>Viller's Bingo Bongo</title>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Fredericka+the+Great&display=swap" rel="stylesheet">
    </head>
    <body>
        <div style="font: 0px 'Fredericka the Great', cursive;">Font loader</div>
        <canvas id="cardCanvas" style="max-width: 600px;"></canvas>
        <script>
            /** @type {HTMLCanvasElement} */
            const cardCanvas = document.getElementById('cardCanvas');
            const cardContext = cardCanvas.getContext('2d');
            const backgroundImage = document.createElement('img');

            // Configurable:
            backgroundImage.src = 'template.jpg';
            const startX = 68;
            const startY = 330;
            const tileSize = 169;
            const tileSpacing = 37;
            const fontSize = 24;

            const options = [
                'Kabouter Plop - Kabouterdans',
                'George Baker Selection - Una Paloma Blanca',
                'Gebroeders Ko - Toeter Op M\'n Waterscooter',
                'Cyndi Lauper - Girls Just Want to Have Fun',
                'Five - Everybody Get Up',
            ];

            // TODO: Vertically center up to 6 rows.
            // TODO: Split up lines smartfully: - Single non-word characters always get their own line.

            function draw() {
                cardCanvas.width = backgroundImage.width;
                cardCanvas.height = backgroundImage.height;
                
                cardContext.drawImage(backgroundImage, 0, 0);

                for (let tileId = 0; tileId < 25; tileId++) {
                    const tileX = startX + ((tileSize + tileSpacing) * (tileId % 5));
                    const tileY = startY + ((tileSize + tileSpacing) * Math.floor(tileId / 5));

                    cardContext.strokeStyle = 'lime';
                    cardContext.lineWidth = 2;
                    cardContext.textAlign = 'center';
                    cardContext.textBaseline = 'top';
                    cardContext.strokeRect(tileX, tileY, tileSize, tileSize);
                    cardContext.font = `${fontSize}px 'Fredericka the Great', cursive`;
                    cardContext.fillText('Stanley Jansen', tileX + (tileSize / 2), tileY, tileSize);
                    cardContext.fillText('-', tileX + (tileSize / 2), tileY + fontSize, tileSize);
                    cardContext.fillText('Bah Bah', tileX + (tileSize / 2), tileY + fontSize + fontSize, tileSize);
                }
            }

            backgroundImage.addEventListener('load', () => {
                document.fonts.ready.then(() => {
                    if (!document.fonts.check(`0 'Fredericka the Great'`)) {
                        console.error('Failed to load font!');
                    }

                    draw();
                });
            });
        </script>
    </body>
</html>
